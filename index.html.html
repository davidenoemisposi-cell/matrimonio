<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Giulia & Marco — 12.09.2026</title>
<style>
  @font-face {
    font-family: "Housttely Signature";
    src:     font-weight: normal;
    font-style: normal;
    font-display: swap;
  }
</style>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=Outfit:wght@200;300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --verde: #7A8B72;
    --verde-chiaro: #96A88E;
    --crema: #F0E5D3;
    --sabbia: #CFC4A8;
    --verde-scuro: #5F6E58;
    --verde-sbiadito: #ADBEA6;
    --crema-chiaro: #F7F0E2;
    --sabbia-chiaro: #DDD5C0;
    --sabbia-scuro: #B8AD94;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    font-family: 'Outfit', sans-serif;
    font-weight: 300;
    background: var(--crema-chiaro);
    color: var(--verde-scuro);
    min-height: 100dvh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }



  /* ——— RICE PAPER TEXTURE ——— */
  .rice-paper {
    position: relative;
  }

  .rice-paper::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    mix-blend-mode: multiply;
    opacity: 1;
    filter: url(#ricePaper);
    background: transparent;
  }

  /* Ensure content stays above texture */
  .rice-paper > * {
    position: relative;
    z-index: 2;
  }

  /* Grain overlay for all light backgrounds */
  .paper-grain::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 256px 256px;
  }

  /* Fiber streaks for light sections */
  .paper-fibers::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='f'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.01 0.3' numOctaves='3' seed='3'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='linear' slope='0.05'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23f)'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 400px 400px;
    mix-blend-mode: multiply;
  }

  /* Subtle speckles */
  .paper-speckle {
    position: relative;
  }

  .paper-speckle::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    background-image:
      radial-gradient(circle, rgba(90,99,67,0.03) 1px, transparent 1px),
      radial-gradient(circle, rgba(180,170,148,0.04) 1px, transparent 1px);
    background-size: 17px 19px, 23px 29px;
    background-position: 0 0, 11px 13px;
  }

  /* Edge shadow for thick paper feel */
  .paper-edge {
    box-shadow:
      inset 0 1px 3px rgba(90,99,67,0.04),
      inset 0 -1px 3px rgba(90,99,67,0.04);
  }

  /* Dark sections get lighter texture */
  .paper-grain-light::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 256px 256px;
    mix-blend-mode: soft-light;
  }

  /* ——— HERO ——— */
  .hero {
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem 1.5rem 3rem;
    position: relative;
    background: var(--crema-chiaro);
    overflow: hidden;
  }





  .hero-intro {
    font-size: 0.65rem;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--verde-chiaro);
    margin-bottom: 1.2rem;
    opacity: 0;
    animation: fadeIn 1s ease 0.3s forwards;
    position: relative; z-index: 2;
  }

  .hero-names {
    font-family: 'Naervik', 'Cormorant Garamond', serif;
    font-weight: 400;
    font-size: clamp(2.8rem, 12vw, 4.5rem);
    line-height: 0.95;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--verde);
    opacity: 0;
    animation: fadeIn 1.2s ease 0.5s forwards;
    position: relative; z-index: 2;
  }

  .hero-and {
    font-family: 'Housttely Signature', 'Cormorant Garamond', serif;
    font-size: clamp(2.2rem, 8vw, 3.2rem);
    color: var(--verde-chiaro);
    margin: 0.05em auto;
    display: block;
    text-transform: none;
    letter-spacing: 0.05em;
  }

  .hero-request {
    font-size: 0.6rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--verde-chiaro);
    line-height: 2;
    margin-top: 1.2rem;
    opacity: 0;
    animation: fadeIn 1s ease 0.9s forwards;
    position: relative; z-index: 2;
  }

  .hero-date-block {
    margin-top: 1.2rem;
    opacity: 0;
    animation: fadeIn 1s ease 1.2s forwards;
    position: relative; z-index: 2;
  }

  .hero-day-num {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 300;
    font-size: 3.2rem;
    color: var(--verde);
    line-height: 1;
  }

  .hero-day-num sup {
    font-size: 0.35em;
    vertical-align: super;
    letter-spacing: 0;
  }

  .hero-month {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 500;
    font-size: 1.2rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--verde);
    margin-top: 0.15rem;
  }

  .hero-dayline {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
    margin-top: 0.3rem;
    font-size: 0.65rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--verde-chiaro);
  }

  .hero-dayline .pipe {
    color: var(--sabbia);
  }

  .hero-ceremony-time {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 0.95rem;
    color: var(--verde-chiaro);
    margin-top: 0.4rem;
  }

  .hero-venue-block {
    margin-top: 1rem;
    opacity: 0;
    animation: fadeIn 1s ease 1.5s forwards;
    position: relative; z-index: 2;
  }

  .hero-venue-name {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 600;
    font-size: 0.8rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--verde);
  }

  .hero-venue-address {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 0.85rem;
    color: var(--verde-chiaro);
    margin-top: 0.2rem;
    line-height: 1.5;
  }

  .hero-follow {
    font-family: 'Housttely Signature', 'Cormorant Garamond', serif;
    font-size: 1.4rem;
    color: var(--verde-chiaro);
    margin-top: 1rem;
    opacity: 0;
    animation: fadeIn 1s ease 1.8s forwards;
    position: relative; z-index: 2;
  }

  .scroll-hint {
    position: absolute;
    bottom: 1.2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.3rem;
    opacity: 0;
    animation: fadeIn 1s ease 2.2s forwards;
  }

  .scroll-text {
    font-size: 0.55rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--sabbia);
  }

  .scroll-arrow {
    animation: bounce 2s ease-in-out infinite;
  }

  .scroll-arrow svg {
    stroke: var(--sabbia);
  }

  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
      opacity: 0.6;
    }
    40% {
      transform: translateY(6px);
      opacity: 1;
    }
    60% {
      transform: translateY(3px);
      opacity: 0.8;
    }
  }

  .maps-btn-hero {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.8rem;
    padding: 0.6rem 1.2rem;
    background: transparent;
    color: var(--verde);
    text-decoration: none;
    font-family: 'Outfit', sans-serif;
    font-size: 0.55rem;
    font-weight: 300;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    border: 1px solid var(--sabbia);
    transition: all 0.3s ease;
  }

  .maps-btn-hero:active {
    transform: scale(0.97);
    background: rgba(122,139,114,0.08);
  }

  .maps-btn-hero svg {
    stroke: var(--verde-chiaro);
  }

  /* ——— SECTIONS ——— */
  .page {
    position: relative;
    overflow: hidden;
  }

  .section {
    padding: 3.5rem 2rem;
    max-width: 420px;
    margin: 0 auto;
    text-align: center;
    opacity: 0;
    transform: translateY(25px);
    transition: all 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
    z-index: 2;
  }
  .section.visible { opacity: 1; transform: translateY(0); }

  .section-script {
    font-family: 'Housttely Signature', 'Cormorant Garamond', serif;
    font-size: 2.6rem;
    color: var(--verde);
    margin-bottom: 0.3rem;
  }

  .section-label {
    font-size: 0.65rem;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--sabbia-scuro);
    margin-bottom: 1.5rem;
  }

  .section-text {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 300;
    font-style: italic;
    font-size: 1rem;
    line-height: 1.8;
    color: var(--verde-chiaro);
  }

  /* ——— VENUE CARDS ——— */
  .venue-card {
    margin-top: 2rem;
    padding: 2rem 1.5rem;
    background: rgba(240,229,211,0.5);
    border: 1px solid var(--sabbia-chiaro);
    border-radius: 2px;
    text-align: center;
  }

  .venue-card .icon {
    margin-bottom: 1rem;
    display: flex;
    justify-content: center;
  }

  .venue-card h3 {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 600;
    font-size: 1.05rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--verde);
    margin-bottom: 0.5rem;
  }

  .venue-card p {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 1.05rem;
    color: var(--verde-chiaro);
    line-height: 1.5;
  }

  .venue-card .time-badge {
    display: inline-block;
    font-family: 'Outfit', sans-serif;
    font-size: 0.75rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--verde);
    border: 1px solid var(--sabbia);
    padding: 0.35rem 1rem;
    margin-top: 0.8rem;
  }

  .maps-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    margin-top: 2rem;
    padding: 0.9rem 1.8rem;
    background: var(--verde);
    color: var(--crema);
    text-decoration: none;
    font-family: 'Outfit', sans-serif;
    font-size: 0.65rem;
    font-weight: 300;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    transition: all 0.3s ease;
  }

  .maps-btn:active {
    transform: scale(0.97);
    opacity: 0.9;
  }

  .maps-btn-light {
    background: var(--sabbia);
    color: var(--verde-scuro);
    margin-top: 2.5rem;
  }

  /* ——— SCHEDULE TIMELINE ——— */
  .timeline-section {
    background: var(--verde);
    padding: 0;
    position: relative;
    overflow: hidden;
  }

  .timeline-content {
    padding: 3.5rem 1.5rem;
    max-width: 420px;
    margin: 0 auto;
    text-align: center;
    opacity: 0;
    transform: translateY(25px);
    transition: all 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
    z-index: 2;
  }
  .timeline-content.visible { opacity: 1; transform: translateY(0); }

  .timeline-content .section-script {
    color: var(--crema);
  }

  .timeline-content .section-label {
    color: var(--sabbia);
  }

  .timeline {
    margin-top: 2rem;
    position: relative;
    padding: 1rem 0;
  }

  /* central vertical line */
  .timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 1px;
    background: linear-gradient(to bottom, transparent, var(--sabbia), var(--sabbia), transparent);
    transform: translateX(-50%);
  }

  .tl-item {
    position: relative;
    display: flex;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .tl-item:last-child {
    margin-bottom: 0;
  }

  /* alternating sides */
  .tl-item.left {
    flex-direction: row;
  }
  .tl-item.right {
    flex-direction: row-reverse;
  }

  .tl-side {
    width: calc(50% - 26px);
    text-align: right;
    padding: 0.8rem 0;
  }
  .tl-item.right .tl-side {
    text-align: left;
  }

  /* center dot with icon */
  .tl-center {
    width: 52px;
    height: 52px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 2;
  }

  .tl-dot {
    width: 52px;
    height: 52px;
    border-radius: 50%;
    background: var(--verde);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    line-height: 1;
  }

  .tl-time {
    font-family: 'Outfit', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.1em;
    color: var(--sabbia);
    margin-bottom: 0.2rem;
  }

  .tl-event {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 400;
    font-size: 1.1rem;
    color: var(--crema);
    letter-spacing: 0.03em;
  }

  .tl-detail {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 0.85rem;
    color: var(--verde-chiaro);
    margin-top: 0.1rem;
  }

  /* ——— INTOLLERANZE & MESSAGGIO ——— */
  .message-page {
    background: var(--crema-chiaro);
    position: relative;
    overflow: hidden;
  }

  .message-content {
    padding: 3.5rem 2rem;
    max-width: 500px;
    margin: 0 auto;
    text-align: center;
    opacity: 0;
    transform: translateY(25px);
    transition: all 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
    z-index: 2;
  }
  .message-content.visible { opacity: 1; transform: translateY(0); }

  .input-wrapper {
    position: relative;
  }

  .elegant-textarea {
    width: 100%;
    padding: 1.2rem 1.4rem;
    background: rgba(240,229,211,0.5);
    border: 1px solid var(--sabbia-chiaro);
    border-radius: 2px;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.05rem;
    font-weight: 400;
    color: var(--verde-scuro);
    line-height: 1.6;
    resize: none;
    transition: all 0.3s ease;
    -webkit-appearance: none;
  }

  .elegant-textarea:focus {
    outline: none;
    border-color: var(--verde-chiaro);
    background: rgba(240,229,211,0.7);
    box-shadow: 0 0 0 3px rgba(122,139,114,0.1);
  }

  .elegant-textarea::placeholder {
    color: var(--sabbia-scuro);
    font-style: italic;
    font-weight: 300;
  }

  /* ——— COUNTDOWN (sabbia) ——— */
  .countdown-section {
    background: var(--sabbia);
    position: relative;
    overflow: hidden;
  }

  .countdown-content {
    padding: 3.5rem 2rem;
    max-width: 420px;
    margin: 0 auto;
    text-align: center;
    opacity: 0;
    transform: translateY(25px);
    transition: all 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
    z-index: 2;
  }
  .countdown-content.visible { opacity: 1; transform: translateY(0); }

  .countdown-content .section-script { color: var(--verde-scuro); }
  .countdown-content .section-label { color: var(--verde); }

  .countdown-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    margin-top: 2rem;
  }

  .cd-item { text-align: center; }

  .cd-num {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 300;
    font-size: 3.2rem;
    line-height: 1;
    color: var(--verde);
  }

  .cd-label {
    font-size: 0.6rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--verde);
    margin-top: 0.5rem;
  }

  /* ——— GUEST LIST (crema) ——— */
  .guest-page {
    background: var(--crema-chiaro);
    position: relative;
    overflow: hidden;
  }

  .guest-content {
    padding: 3.5rem 2rem 2rem;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    opacity: 0;
    transform: translateY(25px);
    transition: all 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
    z-index: 2;
  }
  .guest-content.visible { opacity: 1; transform: translateY(0); }

  /* ——— RSVP COLUMNS ——— */
  .rsvp-columns {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-top: 2rem;
  }

  @media (min-width: 600px) {
    .rsvp-columns {
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
  }

  .rsvp-column {
    background: rgba(240,229,211,0.5);
    border: 1px solid var(--sabbia-chiaro);
    border-radius: 2px;
    padding: 1.5rem;
  }

  .rsvp-column-header {
    text-align: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--sabbia-chiaro);
  }

  .rsvp-column-icon {
    margin-bottom: 0.8rem;
  }

  .rsvp-column-title {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 600;
    font-size: 1.1rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--verde);
  }

  .rsvp-column-subtitle {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 0.9rem;
    color: var(--verde-chiaro);
    margin-top: 0.3rem;
  }

  .guest-list {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }

  .guest-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.2rem;
    background: rgba(247,240,226,0.8);
    border: 1px solid var(--sabbia-chiaro);
    cursor: pointer;
    transition: all 0.3s ease;
    -webkit-user-select: none;
    user-select: none;
    text-align: left;
  }

  .guest-item:active { transform: scale(0.98); }

  .guest-item.selected {
    border-color: var(--verde);
    background: rgba(113,123,84,0.08);
  }

  .guest-check {
    width: 24px; height: 24px;
    border-radius: 50%;
    border: 1.5px solid var(--sabbia);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.3s ease;
  }

  .guest-item.selected .guest-check {
    background: var(--verde);
    border-color: var(--verde);
  }

  .guest-check svg {
    width: 12px; height: 12px;
    stroke: var(--crema); stroke-width: 2.5; fill: none;
    opacity: 0; transform: scale(0.5);
    transition: all 0.25s ease;
  }

  .guest-item.selected .guest-check svg {
    opacity: 1; transform: scale(1);
  }

  .guest-info { flex: 1; }

  .guest-name {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 500;
    font-size: 1.15rem;
    color: var(--verde);
    letter-spacing: 0.03em;
    transition: all 0.3s ease;
  }

  .guest-relation {
    font-size: 0.68rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--sabbia-scuro);
    margin-top: 0.15rem;
  }

  .guest-counter {
    text-align: center;
    margin-top: 1rem;
    font-size: 0.72rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--verde-chiaro);
  }
  .guest-counter span { color: var(--verde); font-weight: 500; }

  .no-pool-guests {
    font-family: 'Cormorant Garamond', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 0.95rem;
    color: var(--sabbia-scuro);
    padding: 2rem 1rem;
    text-align: center;
  }

  /* ——— CONFIRM ——— */
  .confirm-wrapper {
    padding: 1.5rem 2rem 4.5rem;
    max-width: 420px;
    margin: 0 auto;
  }

  .confirm-btn {
    width: 100%;
    padding: 1.15rem 2rem;
    background: var(--verde);
    color: var(--crema);
    border: none;
    font-family: 'Outfit', sans-serif;
    font-weight: 300;
    font-size: 0.72rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.4s ease;
  }

  .confirm-btn:active { transform: scale(0.98); }
  .confirm-btn:disabled { opacity: 0.2; cursor: not-allowed; }
  .confirm-btn.sent { background: var(--verde-chiaro); pointer-events: none; }

  /* ——— FOOTER ——— */
  .footer {
    background: var(--verde);
    text-align: center;
    padding: 4rem 2rem 3.5rem;
    position: relative;
    overflow: hidden;
  }

  .footer-names {
    font-family: 'Naervik', 'Cormorant Garamond', serif;
    font-weight: 400;
    font-size: 1.5rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--crema);
  }

  .footer-and {
    font-family: 'Housttely Signature', 'Cormorant Garamond', serif;
    font-size: 1.8rem;
    color: var(--sabbia);
    text-transform: none;
    letter-spacing: 0;
  }

  .footer-date {
    font-size: 0.65rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--verde-chiaro);
    margin-top: 1.2rem;
  }

  .footer-love {
    font-family: 'Housttely Signature', 'Cormorant Garamond', serif;
    font-size: 1.4rem;
    color: var(--sabbia);
    margin-top: 0.6rem;
  }

  /* ——— TOAST ——— */
  .toast {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--verde);
    color: var(--crema);
    padding: 1rem 2rem;
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    z-index: 100;
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    white-space: nowrap;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<!-- Rice paper texture filter -->
<svg style="position:absolute;width:0;height:0;overflow:hidden">
  <defs>
    <!-- Fine grain noise -->
    <filter id="grain" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="6" stitchTiles="stitch" result="noise"/>
      <feColorMatrix type="saturate" values="0" in="noise" result="grayNoise"/>
      <feComponentTransfer in="grayNoise" result="softNoise">
        <feFuncA type="linear" slope="0.12"/>
      </feComponentTransfer>
      <feBlend in="SourceGraphic" in2="softNoise" mode="multiply"/>
    </filter>
    <!-- Fiber-like streaks -->
    <filter id="fibers" x="-5%" y="-5%" width="110%" height="110%">
      <feTurbulence type="fractalNoise" baseFrequency="0.015 0.4" numOctaves="4" seed="2" stitchTiles="stitch" result="fiberNoise"/>
      <feColorMatrix type="saturate" values="0" in="fiberNoise" result="grayFiber"/>
      <feComponentTransfer in="grayFiber" result="softFiber">
        <feFuncA type="linear" slope="0.06"/>
      </feComponentTransfer>
      <feBlend in="SourceGraphic" in2="softFiber" mode="multiply"/>
    </filter>
    <!-- Combined paper texture -->
    <filter id="ricePaper" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="5" seed="5" stitchTiles="stitch" result="grain"/>
      <feTurbulence type="fractalNoise" baseFrequency="0.012 0.35" numOctaves="3" seed="8" stitchTiles="stitch" result="fibers"/>
      <feMerge result="combined">
        <feMergeNode in="grain"/>
        <feMergeNode in="fibers"/>
      </feMerge>
      <feColorMatrix type="saturate" values="0" in="combined" result="bw"/>
      <feComponentTransfer in="bw" result="soft">
        <feFuncA type="linear" slope="0.08"/>
      </feComponentTransfer>
      <feBlend in="SourceGraphic" in2="soft" mode="multiply"/>
    </filter>
  </defs>
</svg>


<!-- ——— HERO ——— -->
<section class="hero paper-grain-light">
  <div class="hero-intro">Insieme alle loro famiglie</div>

  <h1 class="hero-names">
    GIULIA
    <span class="hero-and">e</span>
    MARCO
  </h1>

  <div class="hero-request">
    Richiedono il piacere<br>
    della Vostra presenza per celebrare<br>
    il loro matrimonio
  </div>

  <div class="hero-date-block">
    <div class="hero-day-num">12</div>
    <div class="hero-month">Settembre</div>
    <div class="hero-dayline">
      Sabato <span class="pipe">|</span> 2026
    </div>
    <div class="hero-ceremony-time">Cerimonia alle ore 15</div>
  </div>

  <div class="hero-venue-block">
    <div class="hero-venue-name">Villa dei Cipressi</div>
    <div class="hero-venue-address">Loc. Poggio Alto, Fiesole</div>
    <a class="maps-btn-hero" href="#" onclick="openMaps(event)">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><circle cx="12" cy="9" r="2.5"/></svg>
      Indicazioni
    </a>
  </div>

  <div class="scroll-hint">
    <span class="scroll-text">Scorri</span>
    <div class="scroll-arrow">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M7 10l5 5 5-5"/>
      </svg>
    </div>
  </div>
</section>

<!-- ——— SCHEDULE ——— -->
<div class="timeline-section paper-grain-light" style="position:relative; overflow:hidden;">
  <div class="timeline-content" data-reveal>
    <div class="section-script">Programma</div>
    <div class="section-label">La Giornata</div>

    <div class="timeline">
      <div class="tl-item left">
        <div class="tl-side">
          <div class="tl-time">15:00</div>
          <div class="tl-event">Cerimonia</div>
          <div class="tl-detail">Giardino della villa</div>
        </div>
        <div class="tl-center">
          <div class="tl-dot"><svg width="26" height="26" viewBox="0 0 30 30" fill="none"><circle cx="11" cy="16" r="6.5" stroke="var(--crema)" stroke-width="1.3" fill="none"/><circle cx="19" cy="16" r="6.5" stroke="var(--crema)" stroke-width="1.3" fill="none"/><path d="M15 10 L15 6 L13 8 M15 6 L17 8" stroke="var(--crema)" stroke-width="1" stroke-linecap="round" fill="none"/></svg></div>
        </div>
        <div class="tl-side"></div>
      </div>

      <div class="tl-item right">
        <div class="tl-side">
          <div class="tl-time">17:00</div>
          <div class="tl-event">Aperitivo</div>
          <div class="tl-detail">Terrazza panoramica</div>
        </div>
        <div class="tl-center">
          <div class="tl-dot"><svg width="26" height="26" viewBox="0 0 30 30" fill="none"><path d="M10 5 L13 16 L13 23" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><path d="M20 5 L17 16 L17 23" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><line x1="10" y1="23" x2="20" y2="23" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><path d="M10 5 Q15 9 20 5" stroke="var(--crema)" stroke-width="1" fill="none"/><path d="M6 3 Q8 5 10 5" stroke="var(--crema)" stroke-width="0.8" stroke-linecap="round" fill="none" opacity="0.6"/><path d="M24 3 Q22 5 20 5" stroke="var(--crema)" stroke-width="0.8" stroke-linecap="round" fill="none" opacity="0.6"/></svg></div>
        </div>
        <div class="tl-side"></div>
      </div>

      <div class="tl-item left">
        <div class="tl-side">
          <div class="tl-time">19:30</div>
          <div class="tl-event">Cena</div>
          <div class="tl-detail">Sala principale</div>
        </div>
        <div class="tl-center">
          <div class="tl-dot"><svg width="26" height="26" viewBox="0 0 30 30" fill="none"><path d="M9 5 L9 12 Q9 14 11 14 L11 25" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round" fill="none"/><line x1="9" y1="5" x2="9" y2="10" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><line x1="7" y1="5" x2="7" y2="10" stroke="var(--crema)" stroke-width="1" stroke-linecap="round"/><line x1="11" y1="5" x2="11" y2="10" stroke="var(--crema)" stroke-width="1" stroke-linecap="round"/><path d="M21 5 Q21 14 19 14 L19 25" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round" fill="none"/></svg></div>
        </div>
        <div class="tl-side"></div>
      </div>

      <div class="tl-item right">
        <div class="tl-side">
          <div class="tl-time">22:00</div>
          <div class="tl-event">Primo Ballo</div>
        </div>
        <div class="tl-center">
          <div class="tl-dot"><svg width="26" height="26" viewBox="0 0 30 30" fill="none"><circle cx="11" cy="6" r="2.5" stroke="var(--crema)" stroke-width="1.2" fill="none"/><circle cx="19" cy="8" r="2.5" stroke="var(--crema)" stroke-width="1.2" fill="none"/><path d="M11 9 L11 17 L8 24" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round" fill="none"/><path d="M11 17 L14 24" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><path d="M19 11 L19 18 L16 24" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round" fill="none"/><path d="M19 18 L22 24" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><path d="M11 12 L19 13" stroke="var(--crema)" stroke-width="1.2" stroke-linecap="round"/><path d="M8 11 L11 12" stroke="var(--crema)" stroke-width="1.2" stroke-linecap="round"/></svg></div>
        </div>
        <div class="tl-side"></div>
      </div>

      <div class="tl-item left">
        <div class="tl-side">
          <div class="tl-time">22:30</div>
          <div class="tl-event">Festa & Musica</div>
          <div class="tl-detail">Fino a tarda notte</div>
        </div>
        <div class="tl-center">
          <div class="tl-dot"><svg width="26" height="26" viewBox="0 0 30 30" fill="none"><ellipse cx="9" cy="22" rx="4" ry="3" stroke="var(--crema)" stroke-width="1.3" fill="none"/><line x1="13" y1="22" x2="13" y2="5" stroke="var(--crema)" stroke-width="1.3" stroke-linecap="round"/><path d="M13 5 Q20 3 20 9 Q20 12 13 11" stroke="var(--crema)" stroke-width="1.3" fill="none" stroke-linecap="round"/><circle cx="22" cy="6" r="1" fill="var(--crema)" opacity="0.5"/><circle cx="24" cy="10" r="0.7" fill="var(--crema)" opacity="0.4"/><circle cx="21" cy="13" r="0.8" fill="var(--crema)" opacity="0.3"/></svg></div>
        </div>
        <div class="tl-side"></div>
      </div>
    </div>

    </div>
  </div>
</div>

<!-- ——— GUEST LIST ——— -->
<div class="guest-page paper-grain paper-speckle paper-edge" style="position:relative; overflow:hidden;">
  <div class="guest-content" data-reveal>
    <div class="section-script">Conferma</div>
    <div class="section-label">La Vostra Presenza</div>
    <p class="section-text" style="margin-bottom: 0.5rem;">Selezionate chi parteciperà agli eventi</p>
    
    <div class="rsvp-columns">
      <!-- Colonna Matrimonio -->
      <div class="rsvp-column">
        <div class="rsvp-column-header">
          <div class="rsvp-column-icon">
            <svg width="32" height="32" viewBox="0 0 30 30" fill="none">
              <circle cx="11" cy="16" r="6.5" stroke="var(--verde)" stroke-width="1.3" fill="none"/>
              <circle cx="19" cy="16" r="6.5" stroke="var(--verde)" stroke-width="1.3" fill="none"/>
              <path d="M15 10 L15 6 L13 8 M15 6 L17 8" stroke="var(--verde)" stroke-width="1" stroke-linecap="round" fill="none"/>
            </svg>
          </div>
          <div class="rsvp-column-title">Matrimonio</div>
          <div class="rsvp-column-subtitle">12 Settembre 2026</div>
        </div>
        <div class="guest-list" id="guestListMatrimonio"></div>
        <div class="guest-counter" id="counterMatrimonio"></div>
      </div>

      <!-- Colonna Pool Party (solo se ci sono invitati abilitati) -->
      <div class="rsvp-column" id="poolPartyColumn" style="display: none;">
        <div class="rsvp-column-header">
          <div class="rsvp-column-icon">
            <svg width="32" height="32" viewBox="0 0 30 30" fill="none">
              <ellipse cx="15" cy="20" rx="12" ry="5" stroke="var(--verde)" stroke-width="1.3" fill="none"/>
              <path d="M5 16 Q10 12 15 16 Q20 20 25 16" stroke="var(--verde)" stroke-width="1" fill="none" opacity="0.6"/>
              <path d="M7 18 Q12 14 17 18" stroke="var(--verde)" stroke-width="0.8" fill="none" opacity="0.4"/>
              <circle cx="10" cy="8" r="3" stroke="var(--verde)" stroke-width="1.2" fill="none"/>
              <path d="M10 11 L10 14" stroke="var(--verde)" stroke-width="1.2" stroke-linecap="round"/>
              <path d="M7 12 L13 12" stroke="var(--verde)" stroke-width="1" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="rsvp-column-title">Pool Party</div>
          <div class="rsvp-column-subtitle">11 Settembre 2026</div>
        </div>
        <div class="guest-list" id="guestListPoolParty"></div>
        <div class="guest-counter" id="counterPoolParty"></div>
      </div>
    </div>
  </div>

</div>

<!-- ——— INTOLLERANZE & MESSAGGIO ——— -->
<div class="message-page paper-grain paper-speckle paper-edge" style="position:relative; overflow:hidden; background: var(--crema-chiaro);">
  <div class="message-content" data-reveal>
    
    <!-- Intolleranze -->
    <div class="section-script">Intolleranze</div>
    <div class="section-label">Allergie Alimentari</div>
    <p class="section-text" style="margin-bottom: 1.5rem;">
      Indicateci eventuali intolleranze o allergie<br>per permetterci di accogliervi al meglio
    </p>
    
    <div class="input-wrapper">
      <textarea 
        id="intolleranzeField" 
        class="elegant-textarea" 
        placeholder="Es. Mario: celiaco, Anna: intollerante al lattosio..."
        rows="3"
      ></textarea>
    </div>

    <div style="margin-top: 3rem;"></div>

    <!-- Messaggio -->
    <div class="section-script">Un Pensiero</div>
    <div class="section-label">Per gli Sposi</div>
    <p class="section-text" style="margin-bottom: 1.5rem;">
      Se desiderate, lasciateci un messaggio.<br>Sarà un ricordo prezioso per noi.
    </p>
    
    <div class="input-wrapper">
      <textarea 
        id="messaggioField" 
        class="elegant-textarea" 
        placeholder="Il vostro messaggio per Giulia e Marco..."
        rows="4"
      ></textarea>
    </div>

</div>

  <div class="confirm-wrapper">
    <button class="confirm-btn" id="confirmBtn" onclick="confirmRSVP()">Conferma</button>
  </div>
</div>

<!-- ——— COUNTDOWN ——— -->
<div class="countdown-section paper-grain paper-edge" style="position:relative;">
  <div class="countdown-content" data-reveal>
    <div class="section-script">Mancano</div>
    <div class="section-label">al grande giorno</div>
    <div class="countdown-grid">
      <div class="cd-item">
        <div class="cd-num" id="cd-days">—</div>
        <div class="cd-label">Giorni</div>
      </div>
      <div class="cd-item">
        <div class="cd-num" id="cd-hours">—</div>
        <div class="cd-label">Ore</div>
      </div>
      <div class="cd-item">
        <div class="cd-num" id="cd-mins">—</div>
        <div class="cd-label">Min</div>
      </div>
      <div class="cd-item">
        <div class="cd-num" id="cd-secs">—</div>
        <div class="cd-label">Sec</div>
      </div>
    </div>
  </div>
</div>

<!-- ——— FOOTER ——— -->
<div class="footer paper-grain-light" style="position:relative; overflow:hidden;">
  <div class="footer-names">GIULIA <span class="footer-and">e</span> MARCO</div>
  <div class="footer-date">12 · Settembre · 2026</div>
  <div class="footer-love">con amore</div>
</div>

<div class="toast" id="toast"></div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<script>
let guests = [];
let family = null;

const params = new URLSearchParams(window.location.search);
const token = params.get("token");

if (!token) {
  document.getElementById("guestListMatrimonio").innerHTML = "<div class='no-pool-guests'>Token non valido</div>";
}

async function loadData() {
  // Carico famiglia tramite token
  const { data: fam, error: famError } = await supabaseClient
    .from("families")
    .select("*")
    .eq("token", token)
    .single();

  if (famError || !fam) {
    document.getElementById("guestListMatrimonio").innerHTML = "<div class='no-pool-guests'>Famiglia non trovata</div>";
    return;
  }

  family = fam;

  // Carica intolleranze esistenti
  if (family.intolleranze) {
    document.getElementById('intolleranzeField').value = family.intolleranze;
  }

  // Carica messaggio esistente (se già inviato)
  const { data: existingMsg } = await supabaseClient
    .from("messages")
    .select("messaggio")
    .eq("family_id", family.id)
    .order('created_at', { ascending: false })
    .limit(1)
    .single();

  if (existingMsg && existingMsg.messaggio) {
    document.getElementById('messaggioField').value = existingMsg.messaggio;
  }

  // Carico invitati collegati alla famiglia
  const { data: gs, error: guestsError } = await supabaseClient
    .from("guests")
    .select("*")
    .eq("family_id", family.id);

  if (guestsError) {
    document.getElementById("guestListMatrimonio").innerHTML = "<div class='no-pool-guests'>Errore caricamento invitati</div>";
    return;
  }

  guests = gs;
  renderGuests();
}

function createGuestItem(guest, index, type) {
  const isMatrimonio = type === 'matrimonio';
  const isSelected = isMatrimonio ? guest.presenza_matrimonio : guest.presenza_pool_party;
  
  const el = document.createElement('div');
  el.className = `guest-item ${isSelected ? 'selected' : ''}`;
  el.dataset.index = index;
  el.dataset.type = type;

  el.innerHTML = `
    <div class="guest-check">
      <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>
    </div>
    <div class="guest-info">
      <div class="guest-name">${guest.nome}</div>
    </div>
  `;

  el.addEventListener('click', () => {
    const idx = parseInt(el.dataset.index);
    
    if (type === 'matrimonio') {
      guests[idx].presenza_matrimonio = !guests[idx].presenza_matrimonio;
    } else {
      guests[idx].presenza_pool_party = !guests[idx].presenza_pool_party;
    }
    
    el.classList.toggle('selected');
    updateCounters();
  });

  return el;
}

function renderGuests() {
  const containerMatrimonio = document.getElementById('guestListMatrimonio');
  const containerPoolParty = document.getElementById('guestListPoolParty');
  const poolPartyColumn = document.getElementById('poolPartyColumn');
  
  containerMatrimonio.innerHTML = "";
  containerPoolParty.innerHTML = "";

  // Filtra invitati al pool party
  const poolPartyGuests = guests.filter(g => g.pool_party_invited);
  
  // Mostra colonna pool party solo se ci sono invitati abilitati
  if (poolPartyGuests.length > 0) {
    poolPartyColumn.style.display = 'block';
  } else {
    poolPartyColumn.style.display = 'none';
  }

  // Render lista matrimonio (tutti gli invitati)
  guests.forEach((g, i) => {
    containerMatrimonio.appendChild(createGuestItem(g, i, 'matrimonio'));
  });

  // Render lista pool party (solo invitati abilitati)
  guests.forEach((g, i) => {
    if (g.pool_party_invited) {
      containerPoolParty.appendChild(createGuestItem(g, i, 'pool'));
    }
  });

  updateCounters();
}

function updateCounters() {
  const matrimonioCount = guests.filter(g => g.presenza_matrimonio).length;
  const poolPartyCount = guests.filter(g => g.pool_party_invited && g.presenza_pool_party).length;
  const poolPartyTotal = guests.filter(g => g.pool_party_invited).length;

  document.getElementById('counterMatrimonio').innerHTML = 
    `<span>${matrimonioCount}</span> di ${guests.length} partecipanti`;
  
  if (poolPartyTotal > 0) {
    document.getElementById('counterPoolParty').innerHTML = 
      `<span>${poolPartyCount}</span> di ${poolPartyTotal} partecipanti`;
  }
}

async function confirmRSVP() {
  const btn = document.getElementById('confirmBtn');
  btn.disabled = true;
  btn.textContent = 'Invio in corso...';

  const intolleranze = document.getElementById('intolleranzeField').value.trim();
  const messaggio = document.getElementById('messaggioField').value.trim();

  try {
    // Salva presenze per ogni ospite
    for (const g of guests) {
      await supabaseClient
        .from('guests')
        .update({
          presenza_matrimonio: g.presenza_matrimonio || false,
          presenza_pool_party: g.presenza_pool_party || false
        })
        .eq('id', g.id);
    }

    // Salva/aggiorna intolleranze nella famiglia
    await supabaseClient
      .from('families')
      .update({ intolleranze: intolleranze || null })
      .eq('id', family.id);

    // Controlla se esiste già un messaggio per questa famiglia
    const { data: existingMsg } = await supabaseClient
      .from('messages')
      .select('id')
      .eq('family_id', family.id)
      .limit(1)
      .single();

    if (existingMsg) {
      // Aggiorna messaggio esistente
      await supabaseClient
        .from('messages')
        .update({ messaggio: messaggio || null })
        .eq('id', existingMsg.id);
    } else if (messaggio) {
      // Crea nuovo messaggio solo se c'è testo
      await supabaseClient
        .from('messages')
        .insert({
          family_id: family.id,
          messaggio: messaggio
        });
    }

    btn.classList.add('sent');
    btn.textContent = 'Confermato ✓';
    showToast('Grazie! Risposte salvate con successo');
  } catch (error) {
    console.error('Errore:', error);
    btn.disabled = false;
    btn.textContent = 'Conferma';
    showToast('Errore nel salvataggio');
  }
}

function showToast(m) {
  const t = document.getElementById('toast');
  t.textContent = m;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// Apri mappe nativa
const VENUE_NAME = "Masseria San Michele, Martina Franca";

function openMaps(e) {
  e.preventDefault();
  
  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
  const isAndroid = /Android/.test(navigator.userAgent);
  const encodedName = encodeURIComponent(VENUE_NAME);
  
  if (isIOS) {
    // Apple Maps con ricerca luogo
    window.location.href = `maps://maps.apple.com/?q=${encodedName}`;
  } else if (isAndroid) {
    // Google Maps app con ricerca luogo
    window.location.href = `geo:0,0?q=${encodedName}`;
  } else {
    // Desktop: apri Google Maps nel browser
    window.open(`https://www.google.com/maps/search/?api=1&query=${encodedName}`, '_blank');
  }
}

// Countdown
const wd = new Date('2026-09-12T15:00:00');
function tick() {
  const d = wd - new Date();
  if (d <= 0) {
    ['cd-days','cd-hours','cd-mins','cd-secs']
      .forEach(id => document.getElementById(id).textContent = '0');
    return;
  }
  document.getElementById('cd-days').textContent = Math.floor(d/(864e5));
  document.getElementById('cd-hours').textContent = Math.floor((d/36e5)%24);
  document.getElementById('cd-mins').textContent = Math.floor((d/6e4)%60);
  document.getElementById('cd-secs').textContent = Math.floor((d/1e3)%60);
}
setInterval(tick, 1000);
tick();

// Reveal animation
const obs = new IntersectionObserver(e =>
  e.forEach(x => { if (x.isIntersecting) x.target.classList.add('visible'); }),
  { threshold: 0.12 }
);
document.querySelectorAll('[data-reveal]').forEach(el => obs.observe(el));

loadData();
</script>

</body>
</html>
